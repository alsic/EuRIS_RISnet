{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "$id": "gate_v3_0.json",
    "title": "RISNET gate schema",
    "type": "object",
    "required": [
      "type",
      "features"
    ],
    "properties": {
      "type": {
        "type": "string",
        "enum": [
          "FeatureCollection"
        ]
      },
      "features": {
        "type": "array",
        "items": {
          "title": "GeoJSON Feature",
          "type": "object",
          "required": [
            "type",
            "properties",
            "geometry"
          ],
          "properties": {
            "type": {
              "type": "string",
              "enum": [
                "Feature"
              ]
            },
            "properties": {
              "type": "object",
              "allOf": [
                {
                  "$ref": "base/baseobject_v3_0.json"
                }
              ],
              "properties": {
                "barrage_ref": {
                  "description": "RIS_ID of the related barrage if the gate belongs to a barrage.",
                  "oneOf": [{"type": "string", "format": "uuid"}, {"type": "null"}]
                },
                "lock_basin_ref": {
                    "description": "RIS_ID of the related lock basin if the gate belongs to a lock basin.",
                    "oneOf": [{"type": "string", "format": "uuid"}, {"type": "null"}]
                },
                "lock_basin_part_up_ref": {
                    "description": "RIS_ID of the related upstream oriented lock basin part if lock basin parts are provided for the lock basin.",
                    "oneOf": [{"type": "string", "format": "uuid"}, {"type": "null"}]
                },
                "lock_basin_part_down_ref": {
                    "description": "RIS_ID of the related downstream oriented lock basin part if lock basin parts are provided for the lock basin.",
                    "oneOf": [{"type": "string", "format": "uuid"}, {"type": "null"}]
                },
                "gauge_ref": {
                    "description": "RIS_ID of the reference gauge station, providing water level information for the calculation of actual clearance height of the gate.",
                    "oneOf": [{"type": "string", "format": "uuid"}, {"type": "null"}]
                },
                "height_ref_level_name": {
                    "description": "Code of the Reference Height, from which the clearance height of the bridge is measured. The reference height is based on the zero point of the gauge (ZPG) specified in the Gauge object.",
                    "oneOf": [{"type": "string", "maxLength": 10}, {"type": "null"}]
                },
                "vertical_clearance_val_cm": {
                    "description": "Waterlevel reference height based on the reference code (see HEIGHT_REF) (CM).",
                    "oneOf": [{"type": "integer"}, {"type": "null"}]
                },
                "vertical_clearance_datum": {
                    "description": "Type of the Waterlevel reference height (CM).",
                    "oneOf": [{"type": "string", "maxLength": 10}, {"type": "null"}]
                },
                "safety_margin_cm": {
                    "description": "Safety margin in cm to be subtracted for calculation of actual clearance height.",
                    "oneOf": [{"type": "integer"}, {"type": "null"}]
                },
                "cl_height_open_cm": {
                    "description": "Available height in cm of the operable weir in opened condition, based on the vertical_clearance_datum of the gate.",
                    "oneOf": [{"type": "integer"}, {"type": "null"}]
                },
                "abs_height_open_cm": {
                    "description": "Absolute height of the operable weir (if applicable) based upon the used reference level for heights.",
                    "oneOf": [{"type": "integer"}, {"type": "null"}]
                },
                "max_height_open_cm": {
                    "description": "Maximum allowed height of the vessel in cm, if the gate opens vertically. This shall be a fall-back default value for all ship categories, if no Sailing Dimensions table is provided. Don't fill this parameter in case of a fixed bridge.",
                    "oneOf": [{"type": "integer"}, {"type": "null"}]
                },
                "cl_width_cm": {
                    "description": "Available width in cm of the gate.",
                    "oneOf": [{"type": "integer"}, {"type": "null"}]
                },
                "max_width_cm": {
                    "description": "Maximum allowed width of the vessel in cm. This shall be a fall-back default value for all ship categories, if no Sailing Dimensions table is provided. ",
                    "oneOf": [{"type": "integer"}, {"type": "null"}]
                },
                "max_draught_cm": {
                    "description": "Maximum allowed draught of the vessel in cm. This shall be a fall-back default value for all ship categories, if no Sailing Dimensions table is provided.  ",
                    "oneOf": [{"type": "integer"}, {"type": "null"}]
                },
                "gate_type": {
                    "description": "This attribute indicates the type of the gate. Allowed values: 1 (Swing Gate), 2 (Lift Gate), 3 (Other)",
                    "type": "integer",
                    "enum": [1, 2, 3]
                },
                "gate_function": {
                    "description": "This attribute indicates the function of the gate. Allowed values: 1 (Lock Gate), 2 (Harbour Gate), 3 (Flood Gate), 4 (Other)",
                    "type": "integer",
                    "enum": [1, 2, 3, 4]
                },
                "operation_type": {
                    "description": "This attribute indicates how the gate is operated. Allowed values: 0 (Local Operation), 1 (Remote Operation), 2 (Self-Service), 3 (Automatic), 4 (not applicable), null (unknown)",
                    "oneOf": [{"type": "integer",  "enum": [0, 1, 2, 3, 4]}, {"type": "null"}]
                },
                "position": {
                    "description": "Position of the gate if it belongs to a lock. Allowed values: UPS (upstream), MI (middle), DWN (downstream)",
                    "oneOf": [
                      {"type": "string", "enum": ["UPS", "MI", "DWN"]}, 
                      {"type": "null"}
                    ]
                }
              },
              "required": [ "gate_type", "gate_function"],
              "unevaluatedProperties": false
            },
            "geometry": {"$ref": "base/GeoJSONPoint_v3_0.json"}
          }
        }
      }
    }
  }
  